---
title: "OAuth란"
categories: ETC
tags: etc
published: false
comments: true
---



## OAuth 2.0에서의 사용자 인증

### OAuth 2.0이 인증 프로토콜이 아닌 이유

OAuth 2.0 스펙은 웹 기반의 애플리케이션과 API 네트워크 간의 **인가 결정**을 전달하는데 유용한 **권한 위임 프로토콜**이다. OAuth 2.0이 인증된 사용자의 동의를 수집하는데 사용되기 때문에 많은 개발자와 API 제공 업체는 OAuth 2.0이 사용자를 안전하게 로그인 시키는데 사용될 수 있는 인증 프로토콜이라고 생각했다. 하지만 사용자와의 상호 작용을 이용하는 보안 프로토콜임에도 불구하고 **OAuth 2.0은 인증 프로토콜이 아니다.**

OAuth 2.0이 인증 프로토콜 내에서 흔히 사용되며, 통산적인 OAuth 2.0 처리 절차에 여러 개의 인증 이벤트를 포함시킨다는 점 때문에 그런 혼동이 주로 야기된다. 결과적으로, 많은 개발자는 OAuth 2.0 프로세스가 사용자 인증을 수행한다고 가정한다.



> **인증이란** 현재 사용자가 누구인지 그리고 현자 사용자가 애플리케이션을 사용하고 있는지 여부를 애플리케이션에게 알려주는 것이다.



## 토큰 보안 취약점

> OAuth Bearer 토큰은 안전한 전송 수단으로서 TLS를 사용하지 않는다면 안전하게 사용될 수 없다.



### 클라이언트에서 탈취

클라이언트에서 Access Token을 탈취당하면 해결할 수 있는 방법은 사실상 없다. 대응책으로서 클라이언트에게 적용할 수 있는 작업의 최소한의 권한 범위만 Access Token에 부여하는 것이다.

가능하다면 Access Token 에 대한 공격을 최소화하기 위해 Access Token을 메모리에 일시적으로 올려서 사용하는 것도 하나의 방법이라고 할 수 있다.



### 인가 서버에서 탈취

인가 서버는 Access Token을 발급하며, 여러 보호된 자원을 이용하는 중심부 역할을 하기 때문에 공격자가 인사 서버의 데이터베이스에 접근할 수 있거나, 데이터베이스에 대한 SQL 인젝션 공격을 수행할 수 있다면, 여러 리소스 소유자의 보안이 침해될 수 있다.

효과적인 예방책 중 하나로서 인가 서버의 Access Token 자체를 암호화하여 저장하는 것이다. 그렇게하면 공격자가 Access Token을 탈취하더라도 피해를 최소화할 수 있다. 암호화를 진행하는 것은 공격자에 대한 피해를 최소화 할 수 있지만 상대적으로 암호화/복호화에 따른 비용이 발생하게 된다.

또한 Access Token 유출과 관련된 위험을 최소화 하기 위해서 Access Token의 유효 기간을 짧게 가져가는 것도 좋은 방법 중 하나입니다.



### 보호된 리소스에서 탈취

리소스 엔드 포인트는 토큰의 권한 범위를 제한하고 최소한의 권한 범위만 요청하도록 설계 되어야 한다.



### 인가 코드

인가 코드 그랜트 타입의 가장 큰 장점은 Access Token을 클라이언트를 통하지 않고, 전달할 수 있다는 것이다.

클라이언트가 자신을 인증할 수 있는 클라이언트 시크릿을 갖고 있는 경우에는 인카 코드 자체만으로는 유용하지 않다. 