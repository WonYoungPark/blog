<!-- $theme: gaia -->
<!-- template: gaia -->
<!-- page_number: true -->
<!-- $width: 1500px
     $height: 1125px -->
<style>
  * {
  	font-size: 90%;
  }
</style>
# ==Spring Boot== 세미나

---
# 1. 스프링 부트란?

---
> 최소한의 작업만으로 스프링 MVC를 사용한 웹 애플리케이션을 개발할 수 있다.

<!--
스프링 MVC를 사용하기 위해서는 필요한 프레임워크들과 라이브러리를 정확하게 설정하지 않으면 안된다. 또한 기본적인 처리를 구축하기 위해 MVC의 각 코드를 작성해야 한다.
-->

---
### 스프링부트 기능
- 단독실행 가능한 스프링애플리케이션을 생성한다.
- 내장형 톰캣, 제티 혹은 언더토우를 내장한다.(war파일 배포를 하지 않아도 된다.)
- 기본 설정되어 있는 `starter` 컴포넌트들을 쉽게 추가할 수 잇다.
- 가능한 경우 자동으로 스프링을 설정해준다.
- 상용화에 필요한 통계, 상태 저검 및 외부설정을 제공한다.
- 설정을 위한 XML코드를 생성하거나 요구하지 않습니다.

---
# 2. 프로젝트 생성

---
### ==프로젝트 생성==
스프링 프로젝트 생성 방법은 크게 두가지로 분류
- [https://start.spring.io](https://start.spring.io) 웹 사이트를 이용한 생성 방법
- 개발 툴을 이용한 생성 방법

---
### ==Intellij로 프로젝트 구성하기==
![25% center](/Users/mrblue-one0/Dev/01.Project/02.GitPage/wonyoungpark.github.io/images/2018/0509_01_01.png)

1. 프로젝트에 사용할 JDK를 선택합니다.
2. Next 버튼을 눌러서 다음 단계로 넘어갑니다.

---
### ==Intellij로 프로젝트 구성하기==
![30% center](/Users/mrblue-one0/Dev/01.Project/02.GitPage/wonyoungpark.github.io/images/2018/0509_01_02.png)
1. Group: 
2. Artifact: 
3. Type: Geadle Project
4. Packaging: Jar

---
### ==Intellij로 프로젝트 구성하기==
![35% center](/Users/mrblue-one0/Dev/01.Project/02.GitPage/wonyoungpark.github.io/images/2018/0509_01_03.png)
- Core
	- DevTools
	- Lombok 
- Web
    - Web 
- NoSQL
    - MongoDB
- Ops
    - Actuator

---
### ==초기화면==
![100% center](/Users/mrblue-one0/Dev/01.Project/02.GitPage/wonyoungpark.github.io/images/2018/0509_01_04.png)

---
# 스프링 부트 애플리케이션 구조

---
### ==스프링 부트 애플리케이션 구조==
<!-- 
스프링 부트는 자바 서버가 필요로 하지 않습니다. 스프링 부트에는 자바 서버가 내장되어 있으며, 그것을 사용해서 직접 서버를 가동해서 애플리케이션을 실행합니다. 즉, 서버 컨테이너에 배포 하는 과정이 필요 없습니다.
-->
---
### ==프로젝트 구조==
#### 기능별 패키지 구성
```java
com
 +- mrblue
     +- myapplication
         +- Application.java
         |
         +- commons
         |   +- StringUtils.java
         |   +- FileUtils.java
         |
         +- config
         |   +- SecurityConfig.java
         |   +- DatabaseConfig.java
         |
         +- customer
         |   +- Customer.java
         |   +- CustomerController.java
         |   +- CustomerService.java
         |   +- CustomerRepository.java
         |
         +- order
             +- Order.java
             +- OrderController.java
             +- OrderService.java
             +- OrderRepository.java
```

---
### ==프로젝트 구조==
#### 계층별 패키지 구성

```java
com
+- mrblue
   +- myapplication
       +- Application.java
       |
       +- commons
       |   +- StringUtils.java
       |   +- FileUtils.java
       |
       +- config
       |   +- SecurityConfig.java
       |   +- DatabaseConfig.java
       |
       +- domain
       |   +- Customer.java
       |   +- Order.java
       |
       +- repository
       |   +- CustomerRepository.java
       |   +- OrderRepository.java
       |
       +- service
       |   +- CustomerService.java
       |   +- OrderService.java
       |
       +- web
           +- CustomerController.java
           +- OrderController.java
```
<!--
스프링 부트는 특정한 코드 구조를 강요하지는 않습니다.
-->

---
### 스프링 부트 자동설정 - autoconfigure
```java
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@SpringBootConfiguration
@EnableAutoConfiguration // 자동설정 활성화
@ComponentScan(excludeFilters = { // 해당 경로부터 컴포넌트 스캔 수행
		@Filter(type = FilterType.CUSTOM, classes = TypeExcludeFilter.class),
		@Filter(type = FilterType.CUSTOM, classes = AutoConfigurationExcludeFilter.class) })
public @interface SpringBootApplication {

	/**
	 * Exclude specific auto-configuration classes such that they will never be applied.
	 * @return the classes to exclude
	 */
	@AliasFor(annotation = EnableAutoConfiguration.class)
	Class<?>[] exclude() default {};

	...

}

```
---

# Controller 만들기

---
```java
package com.mrblue.springboot.web;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloWorldController {

    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String hello() {
        return "Hello Mrblue!!";
    }
}

```

- `@RestController`: **REST**를 위한 컨트롤러
- `@ReqeustMapping`: 특정 URI와 메서드를 연결하여, 특정 URI에 접속하였을 때 메서드를 실행할 수 있게된다.(RequestHandler)

---
```java
@RestController("/crud")
public class CrudController {

    @GetMapping("/")
    public String get() {
        return "";
    }

    @PostMapping("/")
    public String post() {
        return "Hello Mrblue!!";
    }

    @PutMapping("/")
    public String put() {
        return "Hello Mrblue!!";
    }

    @DeleteMapping("/")
    public String delete() {
        return "Hello Mrblue!!";
    }
}
```

---
### 매개변수 전달
URI 쿼리 스트링 부분에 지정한 값을 추출
```java
@Slf4j
@RestController("/crud")
public class CrudController {

    @DeleteMapping("/{num}")
    public String delete(@PathVariable int num) {
        log.info("{}", num);
        
        return "Hello Mrblue!!";
    }
}
```
---
### 객체를 JSON으로 출력
Object를 반환할 경우 JSON형식으로 자동으로 변환해서 텍스트로 출력
```java
@RestController
@RequestMapping("/json")
public class JsonController {
    private List<User> users = new ArrayList<>();

    {
        User user1 = User.builder().id(1).username("권구혁").email("1@mrblue.com").build();
        User user2 = User.builder().id(2).username("박원영").email("2@mrblue.com").build();
        User user3 = User.builder().id(3).username("엄혜선").email("3@mrblue.com").build();

        users.add(user1);
        users.add(user2);
        users.add(user3);
    }

    @GetMapping()
    public List<User> getList() {
        return users;
    }

    @GetMapping("/{id}")
    public User getList(@PathVariable long id) {
        return users.stream().filter(user -> user.getId() == id).findFirst().orElse(null);
    }
}

```